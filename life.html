<html>
    <head>
        <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="lib/css/custom.css">
    </head>
    <body class="life-body">
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container"> 
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span> 
                    </button>
                    <a target="_blank" href="javascript:void(0);" class="navbar-brand">HLC Tracker.</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="#">Employee Information</a></li>  
                        <li class="active"><a href="#">Life Insurance Tracker</a></li>          
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon-user"></span>
                                <strong id="userName"></strong>
                                <span class="glyphicon glyphicon-chevron-down"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><center><a href="#" id="logout">logout</a></center></li>
                    </ul>
                    </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class = "container">
            <div class="wrapper">

                <form class="form-horizontal form-page3" id="form-page3">
                    <fieldset>
                        <!-- Form Name -->
                        <legend>
                            <h3 class="legend-h3">Welcome to E-Life Insurance Tracker - <strong><span id="name"></span></strong></h3>
                            <img src="lib/Assets/images/life.png" class="img-responsive img-rounded small-image">
                        </legend>

                        <h4>Enter the data in appropriate field</h4><br/>
                        <div id="message" class="hidden error_message"></div>
                        <div class="row">
                            <div class="col-md-6">
                                <div>

                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="fn">Application ID</label>
                                        <div class="col-md-6">
                                            <input id="ApplicationID" name="ApplicationID" type="text" placeholder="Allow Alpha/Numeric/Spl Characters" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="ln">Mobile No</label>
                                        <div class="col-md-6">
                                            <input id="MobileNo" name="MobileNo" type="number" pattern="\d{3}[\-]\d{3}[\-]\d{4}" placeholder="Allow only Numeric Value" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="cmpny">Partner</label>
                                        <div class="col-md-6">
                                            <input id="Partner" name="Partner" type="text" placeholder="Allow Alpha & Numeric" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="email">Premium (Excl. Tax)</label>
                                        <div class="col-md-6">
                                            <input id="Premium_Excl" name="Premium_Excl" step="0.01" type="number" placeholder="Allow only Numeric Value" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="add1">Premium (Incl. Tax)</label>
                                        <div class="col-md-6">
                                            <input id="Premium_Incl" name="Premium_Incl" type="text" placeholder="Allow only Numeric Value" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="add2">Payment Mode</label>
                                        <div class="col-md-6">
                                            <input id="Payment_Mode" name="Payment_Mode" type="text" placeholder="" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="city">Direct/Link Payment</label>
                                        <div class="col-md-6">
                                            <input id="DirectOrLinkPayment" name="DirectOrLinkPayment" type="text" placeholder="" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="city">EMP ID</label>
                                        <div class="col-md-6">
                                            <input id="EmpId" name="EmpId" type="number" placeholder="Allow only Numeric Value" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="fn">Customer Name</label>
                                        <div class="col-md-6">
                                            <input id="CustomerName" name="CustomerName" type="text" placeholder="" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="ln">Location</label>
                                        <div class="col-md-6">
                                            <input id="Location" name="Location" type="text" placeholder="" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="cmpny">DOB</label>
                                        <div class="col-md-6">
                                            <input id="DOB" name="DOB" type="text" placeholder="DD/MM/YYYY" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="email">Sum Assured</label>
                                        <div class="col-md-6">
                                            <input id="Sum_Assured" name="Sum_Assured" type="number" placeholder="Allow only Numeric Value" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="add1">E-QUOTE</label>
                                        <div class="col-md-6">
                                            <input id="Equote" name="Equote" type="text"  class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="add2">Plan Name</label>
                                        <div class="col-md-6">
                                            <input id="Plan_Name" name="Plan_Name" type="text" placeholder="" class="form-control input-md" required="required">
                                        </div>
                                    </div>
                                    <!-- Text input-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="city">Term</label>
                                        <div class="col-md-6">
                                            <input id="Term" name="Term" type="text" placeholder="" class="form-control input-md" required="required">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- Button -->
                        <div class="form-group">
                            <label class="col-md-8 control-label" for="submit"></label>
                            <div class="col-md-8 col-sm-offset-5">
                                <button id="submit" name="submit"  class="export btn btn-primary">SAVE</button>
                                <button id="submit" name="submit"  class="export btn btn-primary">SUBMIT</button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
        <script type="text/javascript" src="lib/js/jquery-3.2.0.min.js"></script>
        <script type="text/javascript" src="lib/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="lib/js/jquery.validate.js"></script>
        <script type="text/javascript" src="lib/js/custom.js"></script>
        <script type="text/javascript" src="lib/js/AlertFunction.js"></script>
        <script type="text/javascript">
            $("#MobileNo").blur(function ()
            {
                var filter = /^[0-9]+$/;
                var validate = "";
                if (filter.test($(this).val())) {
                    if ($(this).val().length == 10) {
                        validate = true;
                    } else {
                        Alert('danger', 'Please put 10  digit mobile number');
                        validate = false;
                        $(this).focus();
                        $(this).addClass('error');
                    }
                } else {
                    Alert('danger', 'Invalid Mobile Number');
                    validate = false;
                    $(this).val('');
                    $(this).focus();
                    $(this).addClass('error');
                }

            });
            $("#Premium_Excl").blur(function ()
            {
                var filter = /^[0-9]*\.?[0-9]*$/;
                var filter1 = /^[a-zA-Z\s]*$/;
                var validate = "";
                if (filter.test($(this).val()) && !filter1.test($(this).val())) {
                    validate = true;
                } else {
                    Alert('danger', 'Invalid Value');
                    validate = false;
                    $(this).val('');
                    $(this).focus();
                    $(this).addClass('error');
                }

            });
            $("#Premium_Incl").blur(function ()
            {
                var filter = /^[0-9]*\.?[0-9]*$/;
                var filter1 = /^[a-zA-Z\s]*$/;
                var validate = "";
                if (filter.test($(this).val()) && !filter1.test($(this).val())) {
                    validate = true;
                } else {
                    Alert('danger', 'Invalid Value');
                    validate = false;
                    $(this).val('');
                    $(this).focus();
                    $(this).addClass('error');
                }

            });
            $("#Sum_Assured").blur(function ()
            {
                var filter = /^[0-9]*\.?[0-9]*$/;
                var filter1 = /^[a-zA-Z\s]*$/;
                var validate = "";
                if (filter.test($(this).val()) && !filter1.test($(this).val())) {
                    validate = true;
                } else {
                    Alert('danger', 'Invalid Value');
                    validate = false;
                    $(this).val('');
                    $(this).focus();
                    $(this).addClass('error');
                }

            });

            $("#EmpId").blur(function ()
            {
                var filter = /^[0-9]*\.?[0-9]*$/;
                var filter1 = /^[a-zA-Z\s]*$/;
                var validate = "";
                if (filter.test($(this).val()) && !filter1.test($(this).val())) {
                    validate = true;
                } else {
                    Alert('danger', 'Invalid Value');
                    validate = false;
                    $(this).val('');
                    $(this).focus();
                    $(this).addClass('error');
                }

            });



            $("#Tenure").blur(function ()
            {
                var filter = /^[0-9]*\.?[0-9]*$/;
                var filter1 = /^[a-zA-Z\s]*$/;
                var validate = "";
                if (filter.test($(this).val()) && !filter1.test($(this).val())) {
                    validate = true;
                } else {
                    Alert('danger', 'Invalid Value');
                    validate = false;
                    $(this).val('');
                    $(this).focus();
                    $(this).addClass('error');
                }

            });
            function convertArrayOfObjectsToCSV(args) {
                var result, ctr, keys, columnDelimiter, lineDelimiter, data;

                data = args.data || null;
                if (data == null || !data.length) {
                    return null;
                }

                columnDelimiter = args.columnDelimiter || ',';
                lineDelimiter = args.lineDelimiter || '\n';

                keys = Object.keys(data[0]);

                result = '';
                result += keys.join(columnDelimiter);
                result += lineDelimiter;

                data.forEach(function (item) {
                    ctr = 0;
                    keys.forEach(function (key) {
                        if (ctr > 0)
                            result += columnDelimiter;

                        result += item[key];
                        ctr++;
                    });
                    result += lineDelimiter;
                });

                return result;
            }

            function downloadCSV(args) {
                var stockData = [];
                var obj = {};
                $("input.form-control").each(function () {
                    obj[$(this).attr('name')] = $(this).val();
                });
                stockData.push(obj);
                var data, filename, link;

                var csv = convertArrayOfObjectsToCSV({
                    data: stockData
                });
                if (csv == null)
                    return;

                filename = args.filename || 'export.csv';

                if (!csv.match(/^data:text\/csv/i)) {
                    csv = 'data:text/csv;charset=utf-8,' + csv;
                }
                data = encodeURI(csv);

                link = document.createElement('a');
                link.setAttribute('href', data);
                link.setAttribute('download', filename);
                document.body.appendChild(link);
                link.click();
            }
            $(".export").click(function ()
            {

                if ($("#form-page3").valid())
                {

                    downloadCSV({filename: localStorage.getItem("Agentname") + '_' + localStorage.getItem("CampaignVal") + ".csv"});
                } else {
                    Alert('danger', 'Fill all required fields');
                }
            });
        </script>
    </body>
</html>
